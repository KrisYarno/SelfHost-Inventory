@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base Colors - Light Mode (creamy, softer) */
    --background: 35 45% 98%; /* #fdfbf7 */
    --foreground: 220 12% 18%; /* #2a2f35 */
    --surface: 30 30% 99%; /* #fffaf3 */
    --surface-hover: 30 35% 96%; /* #f7efe4 */
    --border: 35 20% 85%; /* #e8dfd3 */
    --ring: 35 45% 55%; /* warm ring */
    
    /* Brand / Accent - Light Mode (creamy orange) */
    --primary: 35 70% 65%; /* #f5b97a */
    --primary-foreground: 25 70% 12%; /* deep brown for contrast */
    --accent: 35 65% 70%; /* lighter creamy accent */
    --accent-foreground: 25 70% 12%;
    
    /* Semantic Colors - Light Mode */
    --success: 142 60% 40%; /* #1ea555 */
    --success-foreground: 0 0% 100%;
    --warning: 35 80% 50%; /* warm amber */
    --warning-foreground: 25 70% 12%;
    --destructive: 348 75% 52%; /* softer red */
    --destructive-foreground: 0 0% 100%;
    --info: 210 65% 48%; /* calmer blue */
    --info-foreground: 210 65% 25%;
    --error: 348 75% 52%; /* alias for destructive */

    /* Status Colors - Light Mode (for deltas, changes, indicators) */
    --positive: 142 60% 40%; /* green for increases/gains */
    --positive-foreground: 142 60% 20%;
    --positive-muted: 142 60% 94%; /* soft bg for badges */
    --positive-border: 142 60% 82%;
    --negative: 0 72% 51%; /* red for decreases/losses */
    --negative-foreground: 0 72% 25%;
    --negative-muted: 0 72% 94%;
    --negative-border: 0 72% 82%;
    --warning-muted: 38 92% 94%;
    --warning-border: 38 92% 82%;
    --info-muted: 199 89% 94%;
    --info-border: 199 89% 82%;

    /* Typography */
    --font-sans: 'Inter Variable', Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: 'JetBrains Mono Variable', 'JetBrains Mono', 'Fira Code', Consolas, monospace;
    
    /* Spacing Unit */
    --spacing-unit: 0.25rem;
    
    /* Responsive Component Spacing */
    --card-padding: clamp(1rem, 3vw, 1.5rem);
    --section-gap: clamp(1.5rem, 4vw, 2.5rem);
    --inline-gap: clamp(0.75rem, 2vw, 1rem);
    --compact-gap: 0.5rem;
    
    /* Border Radius */
    --radius-none: 0;
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --radius-xl: 1rem;
    --radius-2xl: 1.5rem;
    --radius-full: 9999px;
    
    /* Component Radius */
    --card-radius: var(--radius-xl);
    --button-radius: var(--radius-lg);
    --input-radius: var(--radius-lg);
    --badge-radius: var(--radius-md);
    --avatar-radius: var(--radius-full);
    
    /* Border Width */
    --border-width: 1px;
    --border-width-2: 2px;
    --focus-ring-width: 2px;
    
    /* Shadows - Light Mode (softer) */
    --shadow-sm: 0 2px 4px -1px rgb(0 0 0 / 0.05);
    --shadow: 0 4px 8px -2px rgb(0 0 0 / 0.08), 0 2px 4px -2px rgb(0 0 0 / 0.05);
    --shadow-md: 0 12px 18px -4px rgb(0 0 0 / 0.1), 0 6px 10px -6px rgb(0 0 0 / 0.08);
    --shadow-lg: 0 20px 28px -6px rgb(0 0 0 / 0.12), 0 10px 16px -8px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 28px 36px -8px rgb(0 0 0 / 0.14);
    --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
    
    /* Component Shadows */
    --card-shadow: 0 6px 14px -6px rgb(0 0 0 / 0.12);
    --card-hover-shadow: 0 12px 22px -8px rgb(0 0 0 / 0.14);
    --dropdown-shadow: var(--shadow-lg);
    --modal-shadow: var(--shadow-xl);
    
    /* Animation Timing */
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    
    /* Animation Durations */
    --duration-fast: 150ms;
    --duration-normal: 300ms;
    --duration-slow: 500ms;
    
    /* Additional variables for shadcn/ui components */
    --radius: 0.5rem;
    --muted: 30 20% 96%;
    --muted-foreground: 220 12% 40%;
    --popover: 35 40% 99%;
    --popover-foreground: 220 12% 18%;
    --input: 35 20% 88%;
    --card: 30 30% 99%;
    --card-foreground: 220 12% 18%;
    --secondary: 35 20% 92%;
    --secondary-foreground: 220 12% 18%;
  }
  
  .dark {
    /* Base Colors - Dark Mode */
    --background: 222 47% 11%; /* #0f172a - Consistent Deep Navy */
    --foreground: 210 40% 98%; /* #f8fafc */
    --surface: 217 33% 17%; /* #1e293b - Lighter Navy Surface */
    --surface-hover: 215 25% 27%; /* #334155 */
    --border: 215 25% 27%; /* #334155 */
    --ring: 262 83% 58%; /* #8b5cf6 - Violet Ring */
    
    /* Brand Colors - Dark Mode */
    --primary: 262 83% 58%; /* #8b5cf6 - Violet Primary in Dark Mode for pop */
    --primary-foreground: 210 40% 98%;
    --accent: 199 89% 48%; /* #0ea5e9 - Sky Blue Accent */
    --accent-foreground: 222 47% 11%;
    
    /* Semantic Colors - Dark Mode */
    --success: 142 71% 52%;
    --success-foreground: 142 71% 90%;
    --warning: 38 92% 57%;
    --warning-foreground: 38 92% 90%;
    --error: 346 87% 43%;
    --info: 199 89% 48%;
    --info-foreground: 199 89% 90%;

    /* Status Colors - Dark Mode (for deltas, changes, indicators) */
    --positive: 142 71% 52%; /* green for increases/gains */
    --positive-foreground: 142 71% 90%;
    --positive-muted: 142 60% 40% / 0.15; /* soft bg for badges */
    --positive-border: 142 60% 50% / 0.40;
    --negative: 0 91% 71%; /* red for decreases/losses */
    --negative-foreground: 0 91% 95%;
    --negative-muted: 0 72% 50% / 0.15;
    --negative-border: 0 72% 50% / 0.40;
    --warning-muted: 38 92% 50% / 0.15;
    --warning-border: 38 92% 50% / 0.40;
    --info-muted: 199 89% 50% / 0.15;
    --info-border: 199 89% 50% / 0.40;

    /* Shadows - Dark Mode (Subtle Glows) */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --shadow-md: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.6), 0 8px 10px -6px rgb(0 0 0 / 0.5);
    --shadow-xl: 0 25px 50px -12px rgb(0 0 0 / 0.8);
    --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.4);
    
    /* Component Shadows */
    --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --card-hover-shadow: var(--shadow-lg);
    --dropdown-shadow: var(--shadow-lg);
    --modal-shadow: var(--shadow-xl);
    
    /* Additional variables for shadcn/ui components - Dark Mode */
    --muted: 217 33% 17%;
    --muted-foreground: 215 20.2% 65.1%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;
    --input: 215 25% 27%;
    --card: 217 33% 17%;
    --card-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground overflow-x-hidden;
    font-feature-settings: "rlig" 1, "calt" 1;
    transition: background-color var(--duration-normal) var(--ease-in-out), 
                color var(--duration-normal) var(--ease-in-out);
  }
  
  /* Font application for metric/number classes */
  .font-metric-lg,
  .font-metric,
  .font-number {
    font-family: var(--font-mono);
  }
}

@layer components {
  /* Card Component */
  .card {
    @apply bg-surface border border-transparent rounded-card p-6 shadow-card transition-all duration-300 ease-out;
  }

  .dark .card {
    @apply border-border;
    box-shadow: var(--card-shadow), inset 0 1px 0 0 rgba(255, 255, 255, 0.03);
  }
  
  .card:hover {
    @apply shadow-card-hover -translate-y-0.5;
  }

  /* Elevated Surface (Pop-out effect) */
  .surface-elevated {
    @apply bg-surface border border-border shadow-lg rounded-xl;
  }
  .dark .surface-elevated {
    background: linear-gradient(to bottom, hsl(var(--surface)), hsl(var(--background)));
    box-shadow: var(--shadow-lg), inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
  }
  
  /* Button Component */
  .button-primary {
    @apply bg-primary text-primary-foreground rounded-button font-medium transition-all duration-fast ease-out;
  }
  
  .button-primary:hover {
    @apply opacity-90 shadow-md;
  }
  
  /* Input Component */
  .input {
    @apply bg-background border border-border rounded-input transition-colors duration-fast ease-out;
  }
  
  .input:focus {
    @apply border-primary outline-none ring-2 ring-primary/20;
  }
  
  .dark .input:focus {
    @apply ring-primary/30;
  }
  
  /* Toast Notifications */
  .toast {
    @apply relative overflow-hidden rounded-lg border bg-background p-4 shadow-md border-l-4;
  }
  
  .toast-success {
    @apply border-l-success;
  }
  
  .toast-error {
    @apply border-l-error;
  }
  
  .toast-warning {
    @apply border-l-warning;
  }
  
  .toast-info {
    @apply border-l-info;
  }
  
  .toast-timer {
    @apply absolute bottom-0 left-0 h-1 bg-border/20;
  }
  
  /* Skeleton Loading */
  .skeleton {
    @apply bg-surface animate-skeleton-pulse;
  }
  
  /* Chart Animations */
  .chart-line {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    @apply animate-draw-in;
  }
  
  .chart-bar {
    @apply opacity-0 animate-fade-in;
    animation-delay: calc(var(--index) * 150ms);
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/20 rounded-full border-4 border-solid border-transparent bg-clip-content;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/40;
  }
}

@layer utilities {
  /* Accessibility - Screen Reader Only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* WCAG Compliant Focus Indicators */
  .focus-visible:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    @apply ring-2 ring-offset-2 ring-primary/50;
  }

  /* High Contrast Mode Support */
  @media (prefers-contrast: high) {
    .focus-visible:focus-visible {
      outline: 3px solid;
      outline-offset: 3px;
    }
  }

  /* Keyboard Navigation Indicators */
  .keyboard-navigable:focus {
    @apply ring-2 ring-offset-2 ring-primary;
    outline: none;
  }

  /* Skip to Main Content Link */
  .skip-link {
    position: absolute;
    left: -9999px;
    z-index: 999;
    padding: 1em;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    text-decoration: none;
    border-radius: var(--radius-md);
  }

  .skip-link:focus {
    left: 50%;
    transform: translateX(-50%);
    top: 1rem;
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Text Balance */
  .text-balance {
    text-wrap: balance;
  }
  
  /* Background Patterns */
  .bg-dot-pattern {
    background-image: radial-gradient(circle at 1px 1px, rgb(0 0 0 / 0.05) 1px, transparent 1px);
    background-size: 24px 24px;
  }
  
  .dark .bg-dot-pattern {
    background-image: radial-gradient(circle at 1px 1px, rgb(255 255 255 / 0.05) 1px, transparent 1px);
  }
  
  .bg-grid-pattern {
    background-image: 
      linear-gradient(rgb(0 0 0 / 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgb(0 0 0 / 0.03) 1px, transparent 1px);
    background-size: 64px 64px;
  }
  
  .dark .bg-grid-pattern {
    background-image: 
      linear-gradient(rgb(255 255 255 / 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgb(255 255 255 / 0.03) 1px, transparent 1px);
  }
  
  /* Micro-interactions */
  .hover-scale {
    @apply transition-transform duration-fast ease-out;
  }
  
  .hover-scale:hover {
    transform: scale(1.02);
  }
  
  .focus-glow:focus {
    box-shadow: 0 0 0 2px var(--background), 0 0 0 4px var(--ring);
    @apply transition-shadow duration-fast ease-out;
  }
  
  .card-lift {
    @apply transition-all duration-normal ease-out;
  }
  
  .card-lift:hover {
    transform: translateY(-2px);
    @apply shadow-card-hover;
  }
  
  /* Mobile Touch Optimizations */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Smooth Scrolling for Mobile */
  @media (prefers-reduced-motion: no-preference) {
    .smooth-scroll {
      scroll-behavior: smooth;
    }
  }
  
  /* Mobile Performance Optimizations */
  @media (max-width: 640px) {
    /* Reduce animations on mobile for performance */
    *, *::before, *::after {
      animation-duration: 200ms !important;
      transition-duration: 200ms !important;
    }
    
    /* Optimize hover states for touch */
    @media (hover: none) {
      .hover-scale:hover {
        transform: none;
      }
      
      .card-lift:hover {
        transform: none;
        box-shadow: var(--card-shadow);
      }
    }
    
    /* Optimize scrolling performance */
    .overflow-x-auto {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    
    .overflow-x-auto::-webkit-scrollbar {
      display: none;
    }
  }
  
  /* Pull to Refresh Indicator */
  .pull-to-refresh {
    position: fixed;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    transition: top 0.3s ease-out;
    z-index: 100;
  }
  
  .pull-to-refresh.active {
    top: 20px;
  }
  
  /* Mobile Touch Targets */
  @media (max-width: 768px) {
    .touch-target {
      min-width: 44px;
      min-height: 44px;
    }
  }
  
  /* Mobile-optimized scrolling */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  /* Prevent iOS zoom on input focus */
  @media (max-width: 768px) {
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="password"],
    input[type="search"],
    input[type="tel"],
    input[type="url"],
    textarea,
    select {
      font-size: 16px !important;
    }
  }
}
